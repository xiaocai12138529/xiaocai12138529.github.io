(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["profile"],{1276:function(e,t,n){"use strict";var a=n("d784"),r=n("44e7"),i=n("825a"),s=n("1d80"),o=n("4840"),c=n("8aa5"),l=n("50c4"),u=n("14c3"),h=n("9263"),d=n("9f7f"),f=d.UNSUPPORTED_Y,p=[].push,m=Math.min,v=4294967295;a("split",2,(function(e,t,n){var a;return a="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var a=String(s(this)),i=void 0===n?v:n>>>0;if(0===i)return[];if(void 0===e)return[a];if(!r(e))return t.call(a,e,i);var o,c,l,u=[],d=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,m=new RegExp(e.source,d+"g");while(o=h.call(m,a)){if(c=m.lastIndex,c>f&&(u.push(a.slice(f,o.index)),o.length>1&&o.index<a.length&&p.apply(u,o.slice(1)),l=o[0].length,f=c,u.length>=i))break;m.lastIndex===o.index&&m.lastIndex++}return f===a.length?!l&&m.test("")||u.push(""):u.push(a.slice(f)),u.length>i?u.slice(0,i):u}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var r=s(this),i=void 0==t?void 0:t[e];return void 0!==i?i.call(t,r,n):a.call(String(r),t,n)},function(e,r){var s=n(a,e,this,r,a!==t);if(s.done)return s.value;var h=i(e),d=String(this),p=o(h,RegExp),g=h.unicode,w=(h.ignoreCase?"i":"")+(h.multiline?"m":"")+(h.unicode?"u":"")+(f?"g":"y"),b=new p(f?"^(?:"+h.source+")":h,w),x=void 0===r?v:r>>>0;if(0===x)return[];if(0===d.length)return null===u(b,d)?[d]:[];var k=0,y=0,S=[];while(y<d.length){b.lastIndex=f?0:y;var N,D=u(b,f?d.slice(y):d);if(null===D||(N=m(l(b.lastIndex+(f?y:0)),d.length))===k)y=c(d,y,g);else{if(S.push(d.slice(k,y)),S.length===x)return S;for(var U=1;U<=D.length-1;U++)if(S.push(D[U]),S.length===x)return S;y=k=N}}return S.push(d.slice(k)),S}]}),f)},2982:function(e,t,n){e.exports=n.p+"img/woman.555c9d24.png"},"40eb":function(e,t,n){"use strict";n("7a42")},"7a42":function(e,t,n){},c757:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("van-nav-bar",{attrs:{"left-arrow":"",title:"编辑资料"},on:{"click-left":function(t){return e.$router.push("/setting")}}}),a("van-cell-group",[a("van-cell",{attrs:{"is-link":"",title:"头像",center:""},on:{click:e.updatePhoto}},[a("van-image",{attrs:{slot:"default",width:"1.5rem",height:"1.5rem",fit:"cover",round:"",src:e.userInfo.photo},slot:"default"})],1),a("van-cell",{attrs:{"is-link":"",title:"姓名",value:e.userInfo.name},on:{click:function(t){e.isShowName=!0}}}),a("van-dialog",{attrs:{title:"修改名字","show-cancel-button":""},on:{confirm:function(t){return e.upUserName()}},model:{value:e.isShowName,callback:function(t){e.isShowName=t},expression:"isShowName"}},[a("van-field",{attrs:{placeholder:"请输入用户名"},model:{value:e.newName,callback:function(t){e.newName=t},expression:"newName"}})],1),a("van-cell",{attrs:{"is-link":"",title:"性别",value:1===e.userInfo.gender?"男":"女"},on:{click:function(t){e.isShowGender=!0}}}),a("van-dialog",{attrs:{title:"修改性别","show-cancel-button":""},on:{confirm:function(t){return e.upUserGender()}},model:{value:e.isShowGender,callback:function(t){e.isShowGender=t},expression:"isShowGender"}},[a("van-radio-group",{staticStyle:{display:"flex","justify-content":"center"},attrs:{direction:"horizontal"},model:{value:e.newGender,callback:function(t){e.newGender=t},expression:"newGender"}},[a("van-radio",{attrs:{name:"1"},scopedSlots:e._u([{key:"icon",fn:function(){return[a("img",{staticClass:"img-icon",class:{max:1==e.newGender},attrs:{src:n("d378")}})]},proxy:!0}])},[e._v("男 ")]),a("van-radio",{attrs:{name:"0"},scopedSlots:e._u([{key:"icon",fn:function(){return[a("img",{staticClass:"img-icon",class:{max:0==e.newGender},attrs:{src:n("2982")}})]},proxy:!0}])},[e._v("女 ")])],1)],1),a("van-cell",{attrs:{"is-link":"",title:"生日",value:e.userInfo.birthday},on:{click:function(t){return e.birthdayClick()}}}),a("van-action-sheet",{attrs:{title:"标题"},model:{value:e.isShowBirthday,callback:function(t){e.isShowBirthday=t},expression:"isShowBirthday"}},[a("div",{staticClass:"content"},[a("van-datetime-picker",{attrs:{type:"date",title:"选择年月日","min-date":e.minDate,"max-date":e.maxDate},on:{confirm:e.upBirthday},model:{value:e.currentDate,callback:function(t){e.currentDate=t},expression:"currentDate"}})],1)])],1),a("input",{ref:"upPhoto",attrs:{hidden:"",type:"file"},on:{change:e.hImgUplate}})],1)},r=[],i=n("1da1"),s=n("5530"),o=(n("96cf"),n("2f62")),c=n("c24f");n("ac1f"),n("1276"),n("d81d"),n("a9e3");function l(e){var t=e,n=t.split("-"),a=n.map((function(e){return Number(e)})),r=new Date(a[0],a[1]-1,a[2]);return r}var u=function(e){var t=new Date(e),n=t.getFullYear(),a=t.getMonth()+1;a=a<10?"0"+a:a;var r=t.getDate();return r=r<10?"0"+r:r,n+"-"+a+"-"+r},h={name:"userProfile",data:function(){return{isShowName:!1,isShowGender:!1,isShowBirthday:!1,newName:"",newGender:"1",currentDate:"",minDate:new Date(1965,0,10),maxDate:new Date}},created:function(){this.$store.dispatch("user/getProfile"),this.$store.dispatch("user/updataUserName")},computed:Object(s["a"])({},Object(o["e"])("user",["userInfo"])),methods:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(o["b"])("user",["updataUserName"])),Object(o["d"])("user",["setUserPhoto"])),{},{upBirthday:function(){this.isShowBirthday=!1;var e=this.currentDate,t=u(e);this.updataUserName({birthday:t})},birthdayClick:function(){this.isShowBirthday=!0;var e=this.userInfo.birthday;this.currentDate=l(e)},upUserName:function(){var e=this.newName;""!==this.newName&&this.updataUserName({name:e})},upUserGender:function(){var e=this.newGender;this.updataUserName({gender:e})},updatePhoto:function(){this.$refs.upPhoto.click()},hImgUplate:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a,r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=e.target.files[0],a){n.next=3;break}return n.abrupt("return");case 3:return r=new FormData,r.append("photo",a),n.prev=5,n.next=8,Object(c["e"])(r);case 8:i=n.sent,t.$toast.success("修改头像成功"),t.setUserPhoto(i.data.data.photo),n.next=17;break;case 13:n.prev=13,n.t0=n["catch"](5),t.$toast.fail("修改失败");case 17:case"end":return n.stop()}}),n,null,[[5,13]])})))()}})},d=h,f=(n("40eb"),n("2877")),p=Object(f["a"])(d,a,r,!1,null,"058cf780",null);t["default"]=p.exports},d378:function(e,t,n){e.exports=n.p+"img/man.c353f50b.png"}}]);
//# sourceMappingURL=profile.ebc16ca2.js.map