(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b2a6d97"],{"066c":function(e,t,n){},2423:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i})),n.d(t,"e",(function(){return c})),n.d(t,"c",(function(){return s})),n.d(t,"f",(function(){return o})),n.d(t,"g",(function(){return l})),n.d(t,"d",(function(){return u}));var r=n("b775"),a=function(e,t){return Object(r["a"])({url:"/v1_0/articles",params:{channel_id:e,timestamp:t}})},i=function(e){return Object(r["a"])({url:"/v1_0/article/dislikes",method:"POST",data:{target:e}})},c=function(e,t){return Object(r["a"])({url:"/v1_0/article/reports",method:"POST",data:{target:e,type:t}})},s=function(e){return Object(r["a"])({url:"v1_0/articles/"+e})},o=function(e){return Object(r["a"])({method:"POST",url:"/v1_0/user/followings",data:{target:e}})},l=function(e){return Object(r["a"])({url:"/v1_0/user/followings/"+e,method:"DELETE"})},u=function(e,t){return Object(r["a"])({url:"/v1_0/comments",method:"GET",params:{type:"a",source:e,offset:t}})}},2909:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e){if(Array.isArray(e))return r(e)}n.d(t,"a",(function(){return o}));n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("a630");function i(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n("fb6a"),n("b0c0");function c(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e){return a(e)||i(e)||c(e)||s()}},"35b6":function(e,t,n){},"38fb":function(e,t,n){"use strict";n("fe6c")},"4df4":function(e,t,n){"use strict";var r=n("0366"),a=n("7b0b"),i=n("9bdd"),c=n("e95a"),s=n("50c4"),o=n("8418"),l=n("35a1");e.exports=function(e){var t,n,u,h,f,d,v=a(e),p="function"==typeof this?this:Array,m=arguments.length,b=m>1?arguments[1]:void 0,w=void 0!==b,g=l(v),_=0;if(w&&(b=r(b,m>2?arguments[2]:void 0,2)),void 0==g||p==Array&&c(g))for(t=s(v.length),n=new p(t);t>_;_++)d=w?b(v[_],_):v[_],o(n,_,d);else for(h=g.call(v),f=h.next,n=new p;!(u=f.call(h)).done;_++)d=w?i(h,b,[u.value,_],!0):u.value,o(n,_,d);return n.length=_,n}},"77b8":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"index"},[n("van-tabs",{model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[e._l(e.channels,(function(e){return n("van-tab",{key:e.id,attrs:{title:e.name}},[n("article-list",{attrs:{channel:e}})],1)})),n("div",{staticClass:"bar-btn",on:{click:function(t){e.isShowChannelEdit=!0}}},[n("van-icon",{attrs:{name:"wap-nav"}})],1),n("van-action-sheet",{attrs:{title:"频道"},model:{value:e.isShowChannelEdit,callback:function(t){e.isShowChannelEdit=t},expression:"isShowChannelEdit"}},[n("channelEdit",{attrs:{channels:e.channels,active:e.active,isShowChannelEdit:e.isShowChannelEdit},on:{"change-channel":e.hChangeChannel,"change-actice":e.hChangeActice}})],1)],2)],1)},a=[],i=n("1da1"),c=(n("96cf"),n("6dfa")),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"scrolll",staticClass:"scroll-wrapper",on:{scroll:e.hScroll}},[e._v(" 文章列表组件 "+e._s(Math.random())+" "),n("van-pull-refresh",{on:{refresh:e.onRefresh},model:{value:e.refreshing,callback:function(t){e.refreshing=t},expression:"refreshing"}},[n("van-list",{attrs:{finished:e.finished,"finished-text":"没有更多了"},on:{load:e.onLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[e._l(e.list,(function(t){return n("van-cell",{key:t.art_id,attrs:{title:t.title},on:{click:function(n){return e.$router.push("/article/"+t.art_id)}}},[n("div",{attrs:{slot:"label"},slot:"label"},[t.cover.images?n("van-grid",{attrs:{"column-num":t.cover.images.lenght}},e._l(t.cover.images,(function(e,t){return n("van-grid-item",{key:t},[n("van-image",{attrs:{"lazy-load":"",src:e}})],1)})),1):e._e(),n("div",{staticClass:"meta"},[n("span",[e._v(e._s(t.aut_name))]),n("span",[e._v(e._s(t.comm_count)+"评论")]),n("span",[e._v(e._s(e._f("relativeTime")(t.pubdate)))]),e.$store.state.tokenInfor.token?n("span",{staticClass:"close",on:{click:function(n){return n.stopPropagation(),e.moreArticle(t.art_id)}}},[n("van-icon",{attrs:{name:"cross"}})],1):e._e()])],1)])})),n("van-popup",{style:{width:"80%"},model:{value:e.isShowMroeArticle,callback:function(t){e.isShowMroeArticle=t},expression:"isShowMroeArticle"}},[n("MoreAction",{ref:"refRoreAction",attrs:{isReport:"ture"},on:{"un-like":e.hUnLike,report:e.hReport}})],1)],2)],1)],1)},o=[],l=n("2909"),u=(n("b0c0"),n("c740"),n("a434"),n("2423")),h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[1==e.isReport?n("van-cell-group",[n("van-cell",{on:{click:function(t){return e.$emit("un-like")}}},[n("van-icon",{attrs:{name:"closed-eye"}}),e._v(" 不感兴趣")],1),n("van-cell",{attrs:{"is-link":""},on:{click:function(t){e.isReport=2}}},[n("van-icon",{attrs:{name:"edit"}}),e._v(" 反馈垃圾内容 ")],1),n("van-cell",[n("van-icon",{attrs:{name:"delete-o"}}),e._v(" 拉黑作者")],1)],1):2==e.isReport?n("van-cell-group",[n("van-cell",{attrs:{icon:"arrow-left"},on:{click:function(t){e.isReport=1}}},[e._v("返回")]),n("van-cell",{on:{click:function(t){e.isReport=3}}},[n("van-icon",{attrs:{name:"info-o"}}),e._v(" 其他问题")],1),e._l(e.reports,(function(t){return n("van-cell",{key:t.value,on:{click:function(n){return e.$emit("report",t)}}},[n("van-icon",{attrs:{name:"info-o"}}),e._v(" "+e._s(t.label))],1)}))],2):3==e.isReport?n("van-cell-group",[n("van-cell",{attrs:{icon:"arrow-left"},on:{click:function(t){e.isReport=2}}},[e._v("返回")]),n("van-field",{attrs:{rows:"2",autosize:"",type:"textarea",maxlength:"50",placeholder:"请输入问题","show-word-limit":""}}),n("van-button",{staticClass:"pp",attrs:{type:"primary",size:"mini"}},[e._v("提交")])],1):e._e()],1)},f=[],d=[{value:1,label:"标题夸张"},{value:2,label:"低俗色情"},{value:3,label:"错别字多"},{value:4,label:"旧闻重复"},{value:5,label:"广告软文"},{value:6,label:"内容不实"},{value:7,label:"涉嫌违法犯罪"},{value:8,label:"侵权"}],v=d,p={data:function(){return{isReport:1,reports:v}}},m=p,b=(n("a7e8"),n("2877")),w=Object(b["a"])(m,h,f,!1,null,"d866fe20",null),g=w.exports,_={name:"ArticleList",props:["channel"],components:{MoreAction:g},data:function(){return{list:[],loading:!1,finished:!1,refreshing:!1,tiemstamp:Date.now(),isShowMroeArticle:!1,articleId:null,scrollTop:0}},activated:function(){this.$refs.scrolll.scrollTop=this.scrollTop},methods:{hScroll:function(){this.scrollTop=this.$refs.scrolll.scrollTop},onLoad:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["b"])(e.channel.id,e.tiemstamp);case 2:r=t.sent,a=r.data.data.results,e.tiemstamp=r.data.data.pre_timestamp,(n=e.list).push.apply(n,Object(l["a"])(a)),e.loading=!1,0!==a.length&&null!=r.data.data.pre_timestamp||(e.finished=!0),e.$toast.success("成功加载数据"),e.$toast.setDefaultOptions({duration:100});case 11:case"end":return t.stop()}}),t)})))()},onRefresh:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["b"])(e.channel.id,Date.now());case 2:r=t.sent,a=r.data.data.results,e.list=[],(n=e.list).unshift.apply(n,Object(l["a"])(a)),e.refreshing=!1,e.$toast.success("成功加载数据");case 8:case"end":return t.stop()}}),t)})))()},moreArticle:function(e){this.isShowMroeArticle=!0,this.articleId=e,this.$refs.refRoreAction&&(this.$refs.refRoreAction.isReport=!0)},hUnLike:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isShowMroeArticle=!1,t.prev=1,t.next=5,Object(u["a"])(e.articleId);case 5:t.sent,e.$toast.fail("删除成功"),e.delArticle(e.articleId),t.next=16;break;case 11:t.prev=11,t.t0=t["catch"](1),e.$toast.fail("操作失败"),"Error"===t.t0.name&&alert("请重新登录");case 16:case"end":return t.stop()}}),t,null,[[1,11]])})))()},delArticle:function(e){this.list.findIndex((function(t){return t.art_id===e}));this.list.splice(this.list.findIndex((function(t){return t.art_id===e})),1)},hReport:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=1,n.next=5,Object(u["e"])(t.articleId,e.value);case 5:n.sent,t.isShowMroeArticle=!1,t.$toast.success("举报成功"),t.delArticle(),n.next=15;break;case 12:n.prev=12,n.t0=n["catch"](1),t.$toast.fail("举报失败asdasd ");case 15:case"end":return n.stop()}}),n,null,[[1,12]])})))()}}},k=_,x=(n("adc6"),Object(b["a"])(k,s,o,!1,null,"7500aa94",null)),y=x.exports,C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"channel-edit"},[n("div",{staticClass:"channel"},[n("van-cell",{attrs:{title:"我的频道",border:!1}},[n("van-button",{attrs:{size:"mini",type:"info"},on:{click:function(t){e.isShow=!e.isShow}}},[e._v(e._s(e.isShow?"保存":"编辑"))])],1),n("van-grid",e._l(e.channels,(function(t,r){return n("van-grid-item",{key:t.id,class:{red:e.active==r},on:{click:function(t){return e.hClickMyChannel(r)}}},[n("span",[e._v(e._s(t.name))]),n("van-icon",{directives:[{name:"show",rawName:"v-show",value:e.isShow&&0!=t.id,expression:"isShow && channel.id != 0"}],staticClass:"btn",attrs:{name:"cross"}})],1)})),1)],1),n("div",{staticClass:"channel"},[n("van-cell",{attrs:{title:"可选频道",border:!1}}),n("van-grid",e._l(e.newChannels,(function(t){return n("van-grid-item",{key:t.id,on:{click:function(n){return e.addChannel(t)}}},[n("span",[e._v(e._s(t.name))])])})),1)],1)])},A=[],S=(n("4de4"),{name:"ChannelEdit",props:["channels","active","isShowChannelEdit"],data:function(){return{isShow:!1,allChannels:[]}},computed:{newChannels:function(){var e=this;return this.allChannels.filter((function(t){return!e.channels.some((function(e){return e.id==t.id}))}))}},watch:{isShowChannelEdit:function(){this.isShow=!1}},created:function(){this.getChannels()},methods:{getChannels:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(c["c"])();case 3:n=t.sent,e.allChannels=n.data.data.channels,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},addChannel:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.isShow){n.next=12;break}return n.prev=1,n.next=4,Object(c["a"])([e]);case 4:n.sent,t.channels.push(e),n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](1);case 12:case"end":return n.stop()}}),n,null,[[1,9]])})))()},hClickMyChannel:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.isShow){n.next=4;break}t.$emit("change-channel",e),n.next=11;break;case 4:if(0!=t.channels[e].id){n.next=6;break}return n.abrupt("return");case 6:return n.next=8,Object(c["b"])(t.channels[e].id);case 8:t.channels.splice(e,1),e<t.active&&t.$emit("change-active");case 11:case"end":return n.stop()}}),n)})))()}}}),O=S,R=(n("38fb"),Object(b["a"])(O,C,A,!1,null,"21f82607",null)),j=R.exports,E={name:"home",data:function(){return{active:0,channels:[],isShowChannelEdit:!1}},components:{ArticleList:y,channelEdit:j},created:function(){this.loadChannel()},methods:{hChangeChannel:function(e){this.isShowChannelEdit=!1,this.active=e},loadChannel:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(c["d"])();case 3:n=t.sent,e.channels=n.data.data.channels,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),alert("获取列表失败");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},hChangeActice:function(){this.active--}}},$=E,M=(n("c0c3"),Object(b["a"])($,r,a,!1,null,"cf0432c6",null));t["default"]=M.exports},"9bdd":function(e,t,n){var r=n("825a"),a=n("2a62");e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(c){throw a(e),c}}},a630:function(e,t,n){var r=n("23e7"),a=n("4df4"),i=n("1c7e"),c=!i((function(e){Array.from(e)}));r({target:"Array",stat:!0,forced:c},{from:a})},a7e8:function(e,t,n){"use strict";n("fbb4")},adc6:function(e,t,n){"use strict";n("066c")},c0c3:function(e,t,n){"use strict";n("35b6")},fb6a:function(e,t,n){"use strict";var r=n("23e7"),a=n("861d"),i=n("e8b5"),c=n("23cb"),s=n("50c4"),o=n("fc6a"),l=n("8418"),u=n("b622"),h=n("1dde"),f=h("slice"),d=u("species"),v=[].slice,p=Math.max;r({target:"Array",proto:!0,forced:!f},{slice:function(e,t){var n,r,u,h=o(this),f=s(h.length),m=c(e,f),b=c(void 0===t?f:t,f);if(i(h)&&(n=h.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)?a(n)&&(n=n[d],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return v.call(h,m,b);for(r=new(void 0===n?Array:n)(p(b-m,0)),u=0;m<b;m++,u++)m in h&&l(r,u,h[m]);return r.length=u,r}})},fbb4:function(e,t,n){},fe6c:function(e,t,n){}}]);
//# sourceMappingURL=chunk-2b2a6d97.32c1f5f0.js.map